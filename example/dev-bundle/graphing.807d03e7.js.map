{"mappings":"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","sources":["example/graphing.js","src/materials/debug/GraphMaterial.js"],"sourcesContent":["import * as THREE from 'three';\r\nimport GUI from 'three/examples/jsm/libs/lil-gui.module.min.js';\r\nimport { GraphMaterial } from '../src/materials/debug/GraphMaterial.js';\r\nimport * as BSDFGLSL from '../src/shader/bsdf/index.js';\r\nimport * as CommonGLSL from '../src/shader/common/index.js';\r\n\r\nconst graphFunctionSnippet = /* glsl */`\r\n\t#include <common>\r\n\t${ CommonGLSL.math_functions }\r\n\t${ CommonGLSL.util_functions }\r\n\t${ BSDFGLSL.ggx_functions }\r\n\r\n\tvec4 graphFunction( float x ) {\r\n\r\n\t\tvec3 wi = normalize( vec3( 1.0, 1.0, 1.0 ) );\r\n\t\tvec3 halfVec = vec3( 0.0, 0.0, 1.0 );\r\n\t\tfloat theta = dot( wi, halfVec );\r\n\r\n\t\treturn vec4(\r\n\t\t\tggxPDF( wi, halfVec, x ),\r\n\t\t\tggxDistribution( halfVec, x ),\r\n\t\t\tggxShadowMaskG1( theta, x ),\r\n\t\t\tggxLamda( theta, x )\r\n\t\t);\r\n\r\n\t}\r\n`;\r\n\r\nlet camera, scene, renderer, plane;\r\nlet cameraCenter;\r\nlet zoom = 10;\r\nlet dataEl, dataContainerEl;\r\nconst params = {\r\n\taspect: 1,\r\n\tdisplayX: true,\r\n\tdisplayY: true,\r\n\tdisplayZ: true,\r\n\tdisplayW: true,\r\n\treset() {\r\n\r\n\t\tzoom = 10;\r\n\t\tcameraCenter.set(\r\n\t\t\t- zoom * 0.5 + zoom * 0.05,\r\n\t\t\tgetAspect() * zoom * 0.5 - zoom * 0.05,\r\n\t\t);\r\n\r\n\t}\r\n};\r\n\r\ninit();\r\n\r\n// init\r\nasync function init() {\r\n\r\n\tdataContainerEl = document.getElementById( 'dataContainer' );\r\n\tdataEl = document.getElementById( 'data' );\r\n\r\n\t// renderer init\r\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\r\n\trenderer.setSize( window.innerWidth, window.innerHeight );\r\n\trenderer.setClearColor( 0x11161C );\r\n\trenderer.setPixelRatio( window.devicePixelRatio );\r\n\trenderer.setAnimationLoop( animation );\r\n\tdocument.body.appendChild( renderer.domElement );\r\n\r\n\t// init camera\r\n\tcamera = new THREE.OrthographicCamera();\r\n\tcamera.position.set( 0, 0, 1.5 );\r\n\r\n\tscene = new THREE.Scene();\r\n\r\n\tcameraCenter = new THREE.Vector2();\r\n\r\n\t// image plane\r\n\tplane = new THREE.Mesh(\r\n\t\tnew THREE.PlaneGeometry(),\r\n\t\tnew GraphMaterial( {\r\n\t\t\tside: THREE.DoubleSide,\r\n\t\t\tthickness: 1,\r\n\t\t\tgraphFunctionSnippet,\r\n\t\t} )\r\n\t);\r\n\tplane.scale.setScalar( 2.0 );\r\n\tscene.add( plane );\r\n\r\n\tcameraCenter.set(\r\n\t\t- zoom * 0.5 + zoom * 0.05,\r\n\t\tgetAspect() * zoom * 0.5 - zoom * 0.05,\r\n\t);\r\n\r\n\tconst gui = new GUI();\r\n\tgui.add( plane.material, 'dim' );\r\n\tgui.add( plane.material, 'thickness', 0.5, 10.0 );\r\n\tgui.add( params, 'aspect', 0.1, 2 );\r\n\tgui.add( params, 'reset' );\r\n\r\n\tconst graphFolder = gui.addFolder( 'graphs' );\r\n\tgraphFolder.add( params, 'displayX' ).name( 'display graph 1' );\r\n\tgraphFolder.add( params, 'displayY' ).name( 'display graph 2' );\r\n\tgraphFolder.add( params, 'displayZ' ).name( 'display graph 3' );\r\n\tgraphFolder.add( params, 'displayW' ).name( 'display graph 4' );\r\n\r\n\tlet clicked = false;\r\n\tlet prevX = - 1;\r\n\tlet prevY = - 1;\r\n\trenderer.domElement.addEventListener( 'pointerleave', () =>{\r\n\r\n\t\tdataContainerEl.style.visibility = 'hidden';\r\n\r\n\t} );\r\n\r\n\trenderer.domElement.addEventListener( 'pointerenter', () =>{\r\n\r\n\t\tdataContainerEl.style.visibility = 'visible';\r\n\r\n\t} );\r\n\r\n\trenderer.domElement.addEventListener( 'pointerdown', e => {\r\n\r\n\t\tclicked = true;\r\n\t\tprevX = e.clientX;\r\n\t\tprevY = e.clientY;\r\n\r\n\t} );\r\n\r\n\trenderer.domElement.addEventListener( 'pointermove', e => {\r\n\r\n\t\tclicked = clicked && Boolean( e.buttons & 1 );\r\n\t\tif ( clicked ) {\r\n\r\n\t\t\tconst deltaX = e.clientX - prevX;\r\n\t\t\tconst deltaY = e.clientY - prevY;\r\n\r\n\t\t\tprevX = e.clientX;\r\n\t\t\tprevY = e.clientY;\r\n\r\n\t\t\tconst xWidth = 1;\r\n\t\t\tconst yWidth = getAspect();\r\n\r\n\t\t\tconst graphDeltaX = zoom * xWidth * deltaX / window.innerWidth;\r\n\t\t\tconst graphDeltaY = zoom * yWidth * deltaY / window.innerHeight;\r\n\r\n\t\t\tcameraCenter.x += graphDeltaX;\r\n\t\t\tcameraCenter.y += graphDeltaY;\r\n\r\n\t\t}\r\n\r\n\t\tdataContainerEl.style.left = `${ e.clientX }px`;\r\n\t\tdataContainerEl.style.top = `${ e.clientY }px`;\r\n\r\n\t\tconst data = mouseToGraphValue( e.clientX, e.clientY );\r\n\t\tdataEl.innerText = `x: ${ data.x.toFixed( 3 ) }\\ny: ${ data.y.toFixed( 3 ) }`;\r\n\r\n\t} );\r\n\r\n\trenderer.domElement.addEventListener( 'wheel', e => {\r\n\r\n\t\tconst mouseX = e.clientX;\r\n\t\tconst mouseY = e.clientY;\r\n\r\n\t\tconst xWidth = 1;\r\n\t\tconst yWidth = getAspect();\r\n\r\n\t\tconst centerRelX = ( mouseX / window.innerWidth ) - 0.5;\r\n\t\tconst centerRelY = ( mouseY / window.innerHeight ) - 0.5;\r\n\r\n\t\tconst graphX = zoom * xWidth * centerRelX;\r\n\t\tconst graphY = zoom * yWidth * centerRelY;\r\n\r\n\t\tconst beforeZoom = zoom;\r\n\t\tconst delta = Math.pow( 0.95, 1.0 );\r\n\r\n\t\tif ( e.deltaY < 0 ) {\r\n\r\n\t\t\tzoom *= delta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tzoom /= delta;\r\n\r\n\t\t}\r\n\r\n\t\tzoom = Math.max( zoom, 0.1 );\r\n\t\tzoom = Math.min( zoom, 100 );\r\n\r\n\t\tconst afterX = graphX * zoom / beforeZoom;\r\n\t\tconst afterY = graphY * zoom / beforeZoom;\r\n\r\n\t\tcameraCenter.x -= graphX - afterX;\r\n\t\tcameraCenter.y -= graphY - afterY;\r\n\r\n\t} );\r\n\r\n\twindow.addEventListener( 'resize', () => {\r\n\r\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\r\n\r\n\t} );\r\n\r\n}\r\n\r\n// animation\r\nfunction animation() {\r\n\r\n\tconst mat = plane.material;\r\n\tconst xWidth = 1;\r\n\tconst yWidth = getAspect();\r\n\r\n\tmat.xRange.set(\r\n\t\t- cameraCenter.x - 0.5 * xWidth * zoom,\r\n\t\t- cameraCenter.x + 0.5 * xWidth * zoom,\r\n\t);\r\n\r\n\tmat.yRange.set(\r\n\t\tcameraCenter.y - 0.5 * yWidth * zoom,\r\n\t\tcameraCenter.y + 0.5 * yWidth * zoom,\r\n\t);\r\n\r\n\tmat.graphDisplay.set(\r\n\t\tNumber( params.displayX ),\r\n\t\tNumber( params.displayY ),\r\n\t\tNumber( params.displayZ ),\r\n\t\tNumber( params.displayW ),\r\n\t);\r\n\r\n\trenderer.render( scene, camera );\r\n\r\n}\r\n\r\nfunction getAspect() {\r\n\r\n\treturn params.aspect * window.innerHeight / window.innerWidth;\r\n\r\n}\r\n\r\nfunction mouseToGraphValue( x, y ) {\r\n\r\n\tconst xWidth = 1;\r\n\tconst yWidth = getAspect();\r\n\r\n\tconst centerRelX = ( x / window.innerWidth ) - 0.5;\r\n\tconst centerRelY = ( y / window.innerHeight ) - 0.5;\r\n\r\n\tconst graphX = zoom * xWidth * centerRelX - cameraCenter.x;\r\n\tconst graphY = zoom * yWidth * centerRelY - cameraCenter.y;\r\n\r\n\treturn { x: graphX, y: - graphY };\r\n\r\n}\r\n","import { NoBlending, Color, Vector2, Vector4 } from 'three';\r\nimport { MaterialBase } from '../MaterialBase.js';\r\n\r\nexport class GraphMaterial extends MaterialBase {\r\n\r\n\tget graphFunctionSnippet() {\r\n\r\n\t\treturn this._graphFunctionSnippet;\r\n\r\n\t}\r\n\r\n\tset graphFunctionSnippet( v ) {\r\n\r\n\t\tthis._graphFunctionSnippet = v;\r\n\r\n\t}\r\n\r\n\tconstructor( parameters ) {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tblending: NoBlending,\r\n\r\n\t\t\ttransparent: false,\r\n\r\n\t\t\tdepthWrite: false,\r\n\r\n\t\t\tdepthTest: false,\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tUSE_SLIDER: 0,\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tdim: { value: true },\r\n\t\t\t\tthickness: { value: 1 },\r\n\t\t\t\tgraphCount: { value: 4 },\r\n\t\t\t\tgraphDisplay: { value: new Vector4( 1.0, 1.0, 1.0, 1.0 ) },\r\n\t\t\t\toverlay: { value: true },\r\n\t\t\t\txRange: { value: new Vector2( - 2.0, 2.0 ) },\r\n\t\t\t\tyRange: { value: new Vector2( - 2.0, 2.0 ) },\r\n\t\t\t\tcolors: { value: [\r\n\t\t\t\t\tnew Color( 0xe91e63 ).convertSRGBToLinear(),\r\n\t\t\t\t\tnew Color( 0x4caf50 ).convertSRGBToLinear(),\r\n\t\t\t\t\tnew Color( 0x03a9f4 ).convertSRGBToLinear(),\r\n\t\t\t\t\tnew Color( 0xffc107 ).convertSRGBToLinear(),\r\n\t\t\t\t] },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform bool overlay;\r\n\t\t\t\tuniform bool dim;\r\n\t\t\t\tuniform bvec4 graphDisplay;\r\n\t\t\t\tuniform float graphCount;\r\n\t\t\t\tuniform float thickness;\r\n\t\t\t\tuniform vec2 xRange;\r\n\t\t\t\tuniform vec2 yRange;\r\n\t\t\t\tuniform vec3 colors[ 4 ];\r\n\r\n\t\t\t\t__FUNCTION_CONTENT__\r\n\r\n\t\t\t\tfloat map( float _min, float _max, float v ) {\r\n\r\n\t\t\t\t\tfloat len = _max - _min;\r\n\t\t\t\t\treturn _min + len * v;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvec3 getBackground( vec2 point, float steepness ) {\r\n\r\n\t\t\t\t\tvec2 pw = fwidth( point );\r\n\t\t\t\t\tvec2 halfWidth = pw * 0.5;\r\n\r\n\t\t\t\t\t// x, y axes\r\n\t\t\t\t\tvec2 distToZero = smoothstep(\r\n\t\t\t\t\t\t- halfWidth * 0.5,\r\n\t\t\t\t\t\thalfWidth * 0.5,\r\n\t\t\t\t\t\tabs( point.xy ) - pw\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// 1 unit markers\r\n\t\t\t\t\tvec2 temp;\r\n\t\t\t\t\tvec2 modAxis = abs( modf( point + vec2( 0.5 ), temp ) ) - 0.5;\r\n\t\t\t\t\tvec2 distToAxis = smoothstep(\r\n\t\t\t\t\t\t- halfWidth,\r\n\t\t\t\t\t\thalfWidth,\r\n\t\t\t\t\t\tabs( modAxis.xy ) - pw * 0.5\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// if we're at a chart boundary then remove the artifacts\r\n\t\t\t\t\tif ( abs( pw.y ) > steepness * 0.5 ) {\r\n\r\n\t\t\t\t\t\tdistToZero.y = 1.0;\r\n\t\t\t\t\t\tdistToAxis.y = 1.0;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// mix colors into a background color\r\n\t\t\t\t\tfloat axisIntensity = 1.0 - min( distToZero.x, distToZero.y );\r\n\t\t\t\t\tfloat markerIntensity = 1.0 - min( distToAxis.x, distToAxis.y );\r\n\r\n\t\t\t\t\tvec3 markerColor = mix( vec3( 0.005 ), vec3( 0.05 ), markerIntensity );\r\n\t\t\t\t\tvec3 backgroundColor = mix( markerColor, vec3( 0.2 ), axisIntensity );\r\n\t\t\t\t\treturn backgroundColor;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\t// from uniforms\r\n\t\t\t\t\tfloat sectionCount = overlay ? 1.0 : graphCount;\r\n\t\t\t\t\tfloat yWidth = abs( yRange.y - yRange.x );\r\n\r\n\t\t\t\t\t// separate into sections\r\n\t\t\t\t\tfloat _section;\r\n\t\t\t\t\tfloat sectionY = modf( sectionCount * vUv.y, _section );\r\n\t\t\t\t\tint section = int( sectionCount - _section - 1.0 );\r\n\r\n\t\t\t\t\t// get the current point\r\n\t\t\t\t\tvec2 point = vec2(\r\n\t\t\t\t\t\tmap( xRange.x, xRange.y, vUv.x ),\r\n\t\t\t\t\t\tmap( yRange.x, yRange.y, sectionY )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// get the results\r\n\t\t\t\t\tvec4 result = graphFunction( point.x );\r\n\t\t\t\t\tvec4 delta = result - vec4( point.y );\r\n\t\t\t\t\tvec4 halfDdf = fwidth( delta ) * 0.5;\r\n\t\t\t\t\tif ( fwidth( point.y ) > yWidth * 0.5 ) {\r\n\r\n\t\t\t\t\t\thalfDdf = vec4( 0.0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// graph display intensity\r\n\t\t\t\t\tvec4 graph = smoothstep( - halfDdf, halfDdf, abs( delta ) - thickness * halfDdf );\r\n\r\n\t\t\t\t\t// initialize the background\r\n\t\t\t\t\tgl_FragColor.rgb = getBackground( point, yWidth );\r\n\t\t\t\t\tgl_FragColor.a = 1.0;\r\n\r\n\t\t\t\t\tif ( dim && ( point.x < 0.0 || point.y < 0.0 ) ) {\r\n\r\n\t\t\t\t\t\tgraph = mix(\r\n\t\t\t\t\t\t\tvec4( 1.0 ),\r\n\t\t\t\t\t\t\tgraph,\r\n\t\t\t\t\t\t\t0.05\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// color the charts\r\n\t\t\t\t\tif ( sectionCount > 1.0 ) {\r\n\r\n\t\t\t\t\t\tif ( graphDisplay[ section ] ) {\r\n\r\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(\r\n\t\t\t\t\t\t\t\tcolors[ section ],\r\n\t\t\t\t\t\t\t\tgl_FragColor.rgb,\r\n\t\t\t\t\t\t\t\tgraph[ section ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor ( int i = 0; i < int( graphCount ); i ++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( graphDisplay[ i ] ) {\r\n\r\n\t\t\t\t\t\t\t\tgl_FragColor.rgb = mix(\r\n\t\t\t\t\t\t\t\t\tcolors[ i ],\r\n\t\t\t\t\t\t\t\t\tgl_FragColor.rgb,\r\n\t\t\t\t\t\t\t\t\tgraph[ i ]\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t#include <colorspace_fragment>\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`\r\n\r\n\t\t} );\r\n\r\n\r\n\t\tthis._graphFunctionSnippet = /* glsl */`\r\n\t\t\tvec4 graphFunctionSnippet( float x ) {\r\n\r\n\t\t\t\treturn vec4(\r\n\t\t\t\t\tsin( x * 3.1415926535 ),\r\n\t\t\t\t\tcos( x ),\r\n\t\t\t\t\t0.0,\r\n\t\t\t\t\t0.0\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\t\t`;\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n\tonBeforeCompile( shader ) {\r\n\r\n\t\tshader.fragmentShader = shader.fragmentShader.replace(\r\n\t\t\t'__FUNCTION_CONTENT__',\r\n\t\t\tthis._graphFunctionSnippet,\r\n\t\t);\r\n\t\treturn shader;\r\n\r\n\t}\r\n\r\n\tcustomProgramCacheKey() {\r\n\r\n\t\treturn this._graphFunctionSnippet;\r\n\r\n\t}\r\n\r\n}\r\n"],"names":[],"version":3,"file":"graphing.807d03e7.js.map","sourceRoot":"/__parcel_source_root/"}